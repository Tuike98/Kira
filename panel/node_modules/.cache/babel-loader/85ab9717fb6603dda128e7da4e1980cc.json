{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function License(){const[servers,setServers]=useState([]);const[licenseKey,setLicenseKey]=useState('');const[selectedServer,setSelectedServer]=useState('');useEffect(()=>{fetchServers();fetchLicenses();},[]);const fetchServers=async()=>{try{// Przykładowe dane, zastąp wywołaniem API do pobierania serwerów\nconst response=await fetch('/api/servers');// Zaktualizuj ścieżkę API, aby pobrać serwery\nconst data=await response.json();setServers(data);}catch(error){console.error('Error fetching servers:',error);}};const fetchLicenses=async()=>{try{const response=await fetch('/api/licenses');const licenses=await response.json();setServers(prevServers=>prevServers.map(server=>{const license=licenses.find(lic=>lic.serverId===server.id);if(license){const daysLeft=Math.ceil((new Date(license.expiresAt)-new Date())/(1000*60*60*24));return{...server,licenseExpires:license.expiresAt,daysLeft:daysLeft};}return server;}));}catch(error){console.error('Error fetching licenses:',error);}};const handleActivateLicense=async event=>{event.preventDefault();if(licenseKey&&selectedServer){try{const response=await fetch('/api/licenses',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:licenseKey,serverId:selectedServer})});if(response.ok){const newLicense=await response.json();setServers(prevServers=>prevServers.map(server=>server.id===newLicense.serverId?{...server,licenseExpires:newLicense.expiresAt,daysLeft:Math.ceil((new Date(newLicense.expiresAt)-new Date())/(1000*60*60*24))}:server));}else{alert('Failed to activate license.');}}catch(error){console.error('Error activating license:',error);alert('An error occurred while activating the license.');}}else{alert('Please enter a license key and select a server.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"License\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleActivateLicense,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"License Key:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:licenseKey,onChange:e=>setLicenseKey(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Select Server:\",/*#__PURE__*/_jsxs(\"select\",{value:selectedServer,onChange:e=>setSelectedServer(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a server\"}),servers.map(server=>/*#__PURE__*/_jsx(\"option\",{value:server.id,children:server.name},server.id))]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Activate\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Servers\"}),/*#__PURE__*/_jsx(\"ul\",{children:servers.map(server=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:server.icon,alt:\"\".concat(server.name,\" icon\"),width:\"50\",height:\"50\"}),server.name,server.licenseExpires?/*#__PURE__*/_jsxs(\"span\",{children:[\" - License expires on \",server.licenseExpires,\" (\",server.daysLeft,\" days left)\"]}):/*#__PURE__*/_jsx(\"span\",{children:\" - No license\"})]},server.id))})]});}export default License;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","License","servers","setServers","licenseKey","setLicenseKey","selectedServer","setSelectedServer","fetchServers","fetchLicenses","response","fetch","data","json","error","console","licenses","prevServers","map","server","license","find","lic","serverId","id","daysLeft","Math","ceil","Date","expiresAt","licenseExpires","handleActivateLicense","event","preventDefault","method","headers","body","JSON","stringify","key","ok","newLicense","alert","className","children","onSubmit","type","value","onChange","e","target","name","src","icon","alt","concat","width","height"],"sources":["/home/kira/panel/src/pages/License.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction License() {\n  const [servers, setServers] = useState([]);\n  const [licenseKey, setLicenseKey] = useState('');\n  const [selectedServer, setSelectedServer] = useState('');\n\n  useEffect(() => {\n    fetchServers();\n    fetchLicenses();\n  }, []);\n\n  const fetchServers = async () => {\n    try {\n      // Przykładowe dane, zastąp wywołaniem API do pobierania serwerów\n      const response = await fetch('/api/servers'); // Zaktualizuj ścieżkę API, aby pobrać serwery\n      const data = await response.json();\n      setServers(data);\n    } catch (error) {\n      console.error('Error fetching servers:', error);\n    }\n  };\n\n  const fetchLicenses = async () => {\n    try {\n      const response = await fetch('/api/licenses');\n      const licenses = await response.json();\n      setServers(prevServers =>\n        prevServers.map(server => {\n          const license = licenses.find(lic => lic.serverId === server.id);\n          if (license) {\n            const daysLeft = Math.ceil(\n              (new Date(license.expiresAt) - new Date()) / (1000 * 60 * 60 * 24)\n            );\n            return {\n              ...server,\n              licenseExpires: license.expiresAt,\n              daysLeft: daysLeft,\n            };\n          }\n          return server;\n        })\n      );\n    } catch (error) {\n      console.error('Error fetching licenses:', error);\n    }\n  };\n\n  const handleActivateLicense = async (event) => {\n    event.preventDefault();\n    if (licenseKey && selectedServer) {\n      try {\n        const response = await fetch('/api/licenses', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            key: licenseKey,\n            serverId: selectedServer,\n          }),\n        });\n        if (response.ok) {\n          const newLicense = await response.json();\n          setServers(prevServers =>\n            prevServers.map(server =>\n              server.id === newLicense.serverId\n                ? {\n                    ...server,\n                    licenseExpires: newLicense.expiresAt,\n                    daysLeft: Math.ceil(\n                      (new Date(newLicense.expiresAt) - new Date()) /\n                      (1000 * 60 * 60 * 24)\n                    ),\n                  }\n                : server\n            )\n          );\n        } else {\n          alert('Failed to activate license.');\n        }\n      } catch (error) {\n        console.error('Error activating license:', error);\n        alert('An error occurred while activating the license.');\n      }\n    } else {\n      alert('Please enter a license key and select a server.');\n    }\n  };\n\n  return (\n    <div className=\"page\">\n      <h1>License</h1>\n      <form onSubmit={handleActivateLicense}>\n        <label>\n          License Key:\n          <input\n            type=\"text\"\n            value={licenseKey}\n            onChange={(e) => setLicenseKey(e.target.value)}\n          />\n        </label>\n        <label>\n          Select Server:\n          <select\n            value={selectedServer}\n            onChange={(e) => setSelectedServer(e.target.value)}\n          >\n            <option value=\"\">Select a server</option>\n            {servers.map((server) => (\n              <option key={server.id} value={server.id}>\n                {server.name}\n              </option>\n            ))}\n          </select>\n        </label>\n        <button type=\"submit\">Activate</button>\n      </form>\n      <h2>Servers</h2>\n      <ul>\n        {servers.map((server) => (\n          <li key={server.id}>\n            <img src={server.icon} alt={`${server.name} icon`} width=\"50\" height=\"50\" />\n            {server.name}\n            {server.licenseExpires ? (\n              <span> - License expires on {server.licenseExpires} ({server.daysLeft} days left)</span>\n            ) : (\n              <span> - No license</span>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default License;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}