{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Menu(_ref){let{serverId}=_ref;const[channels,setChannels]=useState([]);const[messages,setMessages]=useState([]);const[selectedChannel,setSelectedChannel]=useState('');const[selectedMessage,setSelectedMessage]=useState('');const[menuType,setMenuType]=useState('normal');const[menuItems,setMenuItems]=useState([]);const[menuItemLabel,setMenuItemLabel]=useState('');const[menuItemMessage,setMenuItemMessage]=useState('');const[error,setError]=useState(null);useEffect(()=>{fetchChannels();},[serverId]);const fetchChannels=async()=>{try{const response=await fetch(\"/api/server/\".concat(serverId,\"/channels\"));if(!response.ok)throw new Error('Failed to fetch channels');const data=await response.json();setChannels(data);if(data.length>0){setSelectedChannel(data[0].id);fetchMessages(data[0].id);}}catch(error){console.error('Error fetching channels:',error);setError('Error fetching channels: '+error.message);}};const fetchMessages=async channelId=>{try{const response=await fetch(\"/api/server/\".concat(serverId,\"/channels/\").concat(channelId,\"/messages\"));if(!response.ok)throw new Error('Failed to fetch messages');const data=await response.json();setMessages(data);}catch(error){console.error('Error fetching messages:',error);setError('Error fetching messages: '+error.message);}};const handleChannelChange=e=>{const channelId=e.target.value;setSelectedChannel(channelId);fetchMessages(channelId);};const handleAddMenuItem=()=>{setMenuItems([...menuItems,{label:menuItemLabel,message:menuItemMessage}]);setMenuItemLabel('');setMenuItemMessage('');};const handleCreateMenu=async()=>{try{const response=await fetch(\"/api/server/\".concat(serverId,\"/message/menu\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({channelId:selectedChannel,messageId:selectedMessage,menuType,menuItems})});if(!response.ok)throw new Error('Failed to create menu');alert('Menu created successfully');}catch(error){console.error('Error creating menu:',error);setError('Error creating menu: '+error.message);}};if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"p\",{children:error})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{onClick:()=>document.getElementById('menuSection').classList.toggle('hidden'),children:\"Create Menu\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"menuSection\",className:\"hidden\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Select Channel:\",/*#__PURE__*/_jsx(\"select\",{value:selectedChannel,onChange:handleChannelChange,children:channels.map(channel=>/*#__PURE__*/_jsx(\"option\",{value:channel.id,children:channel.name},channel.id))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Select Message:\",/*#__PURE__*/_jsx(\"select\",{value:selectedMessage,onChange:e=>setSelectedMessage(e.target.value),children:messages.map(message=>/*#__PURE__*/_jsx(\"option\",{value:message.id,children:message.content},message.id))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Menu Type:\",/*#__PURE__*/_jsxs(\"select\",{value:menuType,onChange:e=>setMenuType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dropdown\",children:\"Dropdown\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:menuItemLabel,onChange:e=>setMenuItemLabel(e.target.value),placeholder:\"Menu Item Label\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:menuItemMessage,onChange:e=>setMenuItemMessage(e.target.value),placeholder:\"Menu Item Message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddMenuItem,children:\"Add Menu Item\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:menuItems.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.label,\" - \",item.message]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateMenu,children:\"Create Menu\"})]})]});}export default Menu;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Menu","_ref","serverId","channels","setChannels","messages","setMessages","selectedChannel","setSelectedChannel","selectedMessage","setSelectedMessage","menuType","setMenuType","menuItems","setMenuItems","menuItemLabel","setMenuItemLabel","menuItemMessage","setMenuItemMessage","error","setError","fetchChannels","response","fetch","concat","ok","Error","data","json","length","id","fetchMessages","console","message","channelId","handleChannelChange","e","target","value","handleAddMenuItem","label","handleCreateMenu","method","headers","body","JSON","stringify","messageId","alert","className","children","onClick","document","getElementById","classList","toggle","onChange","map","channel","name","content","type","placeholder","item","index"],"sources":["/home/kira/panel/src/components/Menu.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction Menu({ serverId }) {\n  const [channels, setChannels] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [selectedChannel, setSelectedChannel] = useState('');\n  const [selectedMessage, setSelectedMessage] = useState('');\n  const [menuType, setMenuType] = useState('normal');\n  const [menuItems, setMenuItems] = useState([]);\n  const [menuItemLabel, setMenuItemLabel] = useState('');\n  const [menuItemMessage, setMenuItemMessage] = useState('');\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchChannels();\n  }, [serverId]);\n\n  const fetchChannels = async () => {\n    try {\n      const response = await fetch(`/api/server/${serverId}/channels`);\n      if (!response.ok) throw new Error('Failed to fetch channels');\n      const data = await response.json();\n      setChannels(data);\n      if (data.length > 0) {\n        setSelectedChannel(data[0].id);\n        fetchMessages(data[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching channels:', error);\n      setError('Error fetching channels: ' + error.message);\n    }\n  };\n\n  const fetchMessages = async (channelId) => {\n    try {\n      const response = await fetch(`/api/server/${serverId}/channels/${channelId}/messages`);\n      if (!response.ok) throw new Error('Failed to fetch messages');\n      const data = await response.json();\n      setMessages(data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n      setError('Error fetching messages: ' + error.message);\n    }\n  };\n\n  const handleChannelChange = (e) => {\n    const channelId = e.target.value;\n    setSelectedChannel(channelId);\n    fetchMessages(channelId);\n  };\n\n  const handleAddMenuItem = () => {\n    setMenuItems([...menuItems, { label: menuItemLabel, message: menuItemMessage }]);\n    setMenuItemLabel('');\n    setMenuItemMessage('');\n  };\n\n  const handleCreateMenu = async () => {\n    try {\n      const response = await fetch(`/api/server/${serverId}/message/menu`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          channelId: selectedChannel,\n          messageId: selectedMessage,\n          menuType,\n          menuItems,\n        }),\n      });\n      if (!response.ok) throw new Error('Failed to create menu');\n      alert('Menu created successfully');\n    } catch (error) {\n      console.error('Error creating menu:', error);\n      setError('Error creating menu: ' + error.message);\n    }\n  };\n\n  if (error) {\n    return <div className=\"page\"><p>{error}</p></div>;\n  }\n\n  return (\n    <div className=\"section\">\n      <h2 onClick={() => document.getElementById('menuSection').classList.toggle('hidden')}>Create Menu</h2>\n      <div id=\"menuSection\" className=\"hidden\">\n        <label>\n          Select Channel:\n          <select value={selectedChannel} onChange={handleChannelChange}>\n            {channels.map(channel => (\n              <option key={channel.id} value={channel.id}>{channel.name}</option>\n            ))}\n          </select>\n        </label>\n        <label>\n          Select Message:\n          <select value={selectedMessage} onChange={(e) => setSelectedMessage(e.target.value)}>\n            {messages.map(message => (\n              <option key={message.id} value={message.id}>{message.content}</option>\n            ))}\n          </select>\n        </label>\n        <label>\n          Menu Type:\n          <select value={menuType} onChange={(e) => setMenuType(e.target.value)}>\n            <option value=\"normal\">Normal</option>\n            <option value=\"dropdown\">Dropdown</option>\n          </select>\n        </label>\n        <div>\n          <input\n            type=\"text\"\n            value={menuItemLabel}\n            onChange={(e) => setMenuItemLabel(e.target.value)}\n            placeholder=\"Menu Item Label\"\n          />\n          <input\n            type=\"text\"\n            value={menuItemMessage}\n            onChange={(e) => setMenuItemMessage(e.target.value)}\n            placeholder=\"Menu Item Message\"\n          />\n          <button onClick={handleAddMenuItem}>Add Menu Item</button>\n        </div>\n        <ul>\n          {menuItems.map((item, index) => (\n            <li key={index}>{item.label} - {item.message}</li>\n          ))}\n        </ul>\n        <button onClick={handleCreateMenu}>Create Menu</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Menu;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}