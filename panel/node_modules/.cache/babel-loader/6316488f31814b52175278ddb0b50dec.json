{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Servers(_ref){let{isAuthenticated}=_ref;const[servers,setServers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(isAuthenticated){fetchServers();}else{setLoading(false);}},[isAuthenticated]);const fetchServers=async()=>{try{const response=await fetch('/api/servers');if(!response.ok)throw new Error('Failed to fetch servers');const data=await response.json();setServers(data);}catch(error){console.error('Error fetching servers:',error);setError('Error fetching servers: '+error.message);}finally{setLoading(false);}};if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Prosz\\u0119 si\\u0119 zalogowa\\u0107, aby uzyska\\u0107 dost\\u0119p do tej strony.\"})});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"p\",{children:error})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Servers\"}),/*#__PURE__*/_jsx(\"ul\",{children:servers.map(server=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.discordapp.com/icons/\".concat(server.id,\"/\").concat(server.icon,\".png\"),alt:\"\".concat(server.name,\" icon\"),width:\"50\",height:\"50\"}),server.name,server.hasLicense&&server.hasBot?/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href=\"/dashboard/\".concat(server.id),children:\"Dashboard\"}):server.hasLicense&&!server.hasBot?/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href=\"https://discord.com/oauth2/authorize?client_id=\".concat(process.env.DISCORD_CLIENT_ID,\"&scope=bot&permissions=8&guild_id=\").concat(server.id),children:\"Invite Bot\"}):/*#__PURE__*/_jsx(\"a\",{href:\"/license\",children:\"Activate License\"})]},server.id))})]});}export default Servers;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Servers","_ref","isAuthenticated","servers","setServers","loading","setLoading","error","setError","fetchServers","response","fetch","ok","Error","data","json","console","message","className","children","map","server","src","concat","id","icon","alt","name","width","height","hasLicense","hasBot","onClick","window","location","href","process","env","DISCORD_CLIENT_ID"],"sources":["/home/kira/panel/src/pages/Servers.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction Servers({ isAuthenticated }) {\n  const [servers, setServers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchServers();\n    } else {\n      setLoading(false);\n    }\n  }, [isAuthenticated]);\n\n  const fetchServers = async () => {\n    try {\n      const response = await fetch('/api/servers');\n      if (!response.ok) throw new Error('Failed to fetch servers');\n      const data = await response.json();\n      setServers(data);\n    } catch (error) {\n      console.error('Error fetching servers:', error);\n      setError('Error fetching servers: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isAuthenticated) {\n    return <div className=\"page\"><p>Proszę się zalogować, aby uzyskać dostęp do tej strony.</p></div>;\n  }\n\n  if (loading) {\n    return <div className=\"page\"><p>Loading...</p></div>;\n  }\n\n  if (error) {\n    return <div className=\"page\"><p>{error}</p></div>;\n  }\n\n  return (\n    <div className=\"page\">\n      <h1>Servers</h1>\n      <ul>\n        {servers.map((server) => (\n          <li key={server.id}>\n            <img src={`https://cdn.discordapp.com/icons/${server.id}/${server.icon}.png`} alt={`${server.name} icon`} width=\"50\" height=\"50\" />\n            {server.name}\n            {server.hasLicense && server.hasBot ? (\n              <button onClick={() => window.location.href = `/dashboard/${server.id}`}>Dashboard</button>\n            ) : server.hasLicense && !server.hasBot ? (\n              <button onClick={() => window.location.href = `https://discord.com/oauth2/authorize?client_id=${process.env.DISCORD_CLIENT_ID}&scope=bot&permissions=8&guild_id=${server.id}`}>Invite Bot</button>\n            ) : (\n              <a href=\"/license\">Activate License</a>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default Servers;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}