{"ast":null,"code":"import React,{useState,useEffect}from'react';import logger from'./logger';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function Home(_ref){let{isAuthenticated,username}=_ref;const[adminServerCount,setAdminServerCount]=useState(0);const[botServerCount,setBotServerCount]=useState(0);const[subscriptionCount,setSubscriptionCount]=useState(0);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(isAuthenticated){fetchData();}else{setLoading(false);}},[isAuthenticated]);const fetchData=async()=>{try{const serversResponse=await fetch('/api/servers');if(!serversResponse.ok){const errorDetails=await serversResponse.text();throw new Error(\"Failed to fetch servers. Status: \".concat(serversResponse.status,\", StatusText: \").concat(serversResponse.statusText,\", Details: \").concat(errorDetails));}const servers=await serversResponse.json();const adminServers=servers.filter(server=>(server.permissions&0x8)===0x8);const botServers=servers.filter(server=>server.hasBot);setAdminServerCount(adminServers.length);setBotServerCount(botServers.length);const subscriptionsResponse=await fetch('/api/licenses');if(!subscriptionsResponse.ok){const errorDetails=await subscriptionsResponse.text();throw new Error(\"Failed to fetch subscriptions. Status: \".concat(subscriptionsResponse.status,\", StatusText: \").concat(subscriptionsResponse.statusText,\", Details: \").concat(errorDetails));}const subscriptions=await subscriptionsResponse.json();setSubscriptionCount(subscriptions.length);}catch(error){logger.error('Error fetching data: %s',error.message,{stack:error.stack});setError('Error fetching data. Please check the server logs for more details.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:isAuthenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Witamy, \",username,\"!\"]}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0141adowanie danych...\"}):error?/*#__PURE__*/_jsx(\"p\",{children:error}):/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Serwery, na kt\\xF3rych masz uprawnienia administratora: \",adminServerCount]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Serwery, na kt\\xF3rych jest Kira Evolved: \",botServerCount]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Subskrypcje: \",subscriptionCount]})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Witamy w Kira Evolved!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Kira Evolved to zaawansowany bot do zarz\\u0105dzania serwerami Discord, oferuj\\u0105cy szeroki zakres funkcji, takich jak zarz\\u0105dzanie kana\\u0142ami, u\\u017Cytkownikami, rolami i wiele wi\\u0119cej.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"G\\u0142\\xF3wne funkcje Kira Evolved:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Zarz\\u0105dzanie kana\\u0142ami: Mo\\u017Cliwo\\u015B\\u0107 tworzenia, edytowania i usuwania kana\\u0142\\xF3w.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Zarz\\u0105dzanie u\\u017Cytkownikami: Narz\\u0119dzia do moderacji, przydzielania r\\xF3l i zarz\\u0105dzania u\\u017Cytkownikami.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Automatyzacja: Automatyczne przypisywanie r\\xF3l, powitania nowych u\\u017Cytkownik\\xF3w i inne.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Bezpiecze\\u0144stwo: Zaawansowane funkcje zabezpieczaj\\u0105ce, takie jak system antyspamowy.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Integracje: Integracje z innymi narz\\u0119dziami i us\\u0142ugami.\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/auth/discord\",children:\"Zaloguj si\\u0119 poprzez Discord\"})]})});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","logger","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Home","_ref","isAuthenticated","username","adminServerCount","setAdminServerCount","botServerCount","setBotServerCount","subscriptionCount","setSubscriptionCount","loading","setLoading","error","setError","fetchData","serversResponse","fetch","ok","errorDetails","text","Error","concat","status","statusText","servers","json","adminServers","filter","server","permissions","botServers","hasBot","length","subscriptionsResponse","subscriptions","message","stack","className","children","href"],"sources":["/home/kira/panel/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logger from './logger';\n\nfunction Home({ isAuthenticated, username }) {\n  const [adminServerCount, setAdminServerCount] = useState(0);\n  const [botServerCount, setBotServerCount] = useState(0);\n  const [subscriptionCount, setSubscriptionCount] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchData();\n    } else {\n      setLoading(false);\n    }\n  }, [isAuthenticated]);\n\n  const fetchData = async () => {\n    try {\n      const serversResponse = await fetch('/api/servers');\n      if (!serversResponse.ok) {\n        const errorDetails = await serversResponse.text();\n        throw new Error(`Failed to fetch servers. Status: ${serversResponse.status}, StatusText: ${serversResponse.statusText}, Details: ${errorDetails}`);\n      }\n      const servers = await serversResponse.json();\n      const adminServers = servers.filter(server => (server.permissions & 0x8) === 0x8);\n      const botServers = servers.filter(server => server.hasBot);\n\n      setAdminServerCount(adminServers.length);\n      setBotServerCount(botServers.length);\n\n      const subscriptionsResponse = await fetch('/api/licenses');\n      if (!subscriptionsResponse.ok) {\n        const errorDetails = await subscriptionsResponse.text();\n        throw new Error(`Failed to fetch subscriptions. Status: ${subscriptionsResponse.status}, StatusText: ${subscriptionsResponse.statusText}, Details: ${errorDetails}`);\n      }\n      const subscriptions = await subscriptionsResponse.json();\n      setSubscriptionCount(subscriptions.length);\n    } catch (error) {\n      logger.error('Error fetching data: %s', error.message, { stack: error.stack });\n      setError('Error fetching data. Please check the server logs for more details.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"page\">\n      {isAuthenticated ? (\n        <>\n          <h1>Witamy, {username}!</h1>\n          {loading ? (\n            <p>Ładowanie danych...</p>\n          ) : error ? (\n            <p>{error}</p>\n          ) : (\n            <ul>\n              <li>Serwery, na których masz uprawnienia administratora: {adminServerCount}</li>\n              <li>Serwery, na których jest Kira Evolved: {botServerCount}</li>\n              <li>Subskrypcje: {subscriptionCount}</li>\n            </ul>\n          )}\n        </>\n      ) : (\n        <>\n          <h1>Witamy w Kira Evolved!</h1>\n          <p>Kira Evolved to zaawansowany bot do zarządzania serwerami Discord, oferujący szeroki zakres funkcji, takich jak zarządzanie kanałami, użytkownikami, rolami i wiele więcej.</p>\n          <p>Główne funkcje Kira Evolved:</p>\n          <ul>\n            <li>Zarządzanie kanałami: Możliwość tworzenia, edytowania i usuwania kanałów.</li>\n            <li>Zarządzanie użytkownikami: Narzędzia do moderacji, przydzielania ról i zarządzania użytkownikami.</li>\n            <li>Automatyzacja: Automatyczne przypisywanie ról, powitania nowych użytkowników i inne.</li>\n            <li>Bezpieczeństwo: Zaawansowane funkcje zabezpieczające, takie jak system antyspamowy.</li>\n            <li>Integracje: Integracje z innymi narzędziami i usługami.</li>\n          </ul>\n          <a href=\"/auth/discord\">Zaloguj się poprzez Discord</a>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}