{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Menu(_ref){let{serverId,channels,selectedChannel,setSelectedChannel}=_ref;const[messages,setMessages]=useState([]);const[selectedMessage,setSelectedMessage]=useState('');const[menuType,setMenuType]=useState('normal');const[menuItems,setMenuItems]=useState([]);const[menuItemLabel,setMenuItemLabel]=useState('');const[menuItemMessage,setMenuItemMessage]=useState('');const[error,setError]=useState(null);useEffect(()=>{if(selectedChannel){fetchMessages(selectedChannel);}},[selectedChannel]);const fetchMessages=async channelId=>{try{const response=await fetch(\"/api/server/\".concat(serverId,\"/channels/\").concat(channelId,\"/messages\"));if(!response.ok)throw new Error('Failed to fetch messages');const data=await response.json();setMessages(data);}catch(error){console.error('Error fetching messages:',error);setError('Error fetching messages: '+error.message);}};const handleAddMenuItem=()=>{setMenuItems([...menuItems,{label:menuItemLabel,message:menuItemMessage}]);setMenuItemLabel('');setMenuItemMessage('');};const handleCreateMenu=async()=>{try{console.log(\"Creating menu in Channel: \".concat(selectedChannel,\" with Message: \").concat(selectedMessage));console.log(\"Menu Items: \".concat(JSON.stringify(menuItems)));const response=await fetch(\"/api/server/\".concat(serverId,\"/message/menu\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({channelId:selectedChannel,messageId:selectedMessage,menuType,menuItems})});if(!response.ok)throw new Error('Failed to create menu');alert('Menu created successfully');}catch(error){console.error('Error creating menu:',error);setError('Error creating menu: '+error.message);}};if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsx(\"p\",{children:error})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{onClick:()=>document.getElementById('menuSection').classList.toggle('hidden'),children:\"Create Menu\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"menuSection\",className:\"hidden\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Select Channel:\",/*#__PURE__*/_jsx(\"select\",{value:selectedChannel,onChange:e=>setSelectedChannel(e.target.value),children:channels.map(channel=>/*#__PURE__*/_jsx(\"option\",{value:channel.id,children:channel.name},channel.id))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Select Message:\",/*#__PURE__*/_jsx(\"select\",{value:selectedMessage,onChange:e=>setSelectedMessage(e.target.value),children:messages.map(message=>/*#__PURE__*/_jsx(\"option\",{value:message.id,children:message.content},message.id))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Menu Type:\",/*#__PURE__*/_jsxs(\"select\",{value:menuType,onChange:e=>setMenuType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dropdown\",children:\"Dropdown\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:menuItemLabel,onChange:e=>setMenuItemLabel(e.target.value),placeholder:\"Menu Item Label\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:menuItemMessage,onChange:e=>setMenuItemMessage(e.target.value),placeholder:\"Menu Item Message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddMenuItem,children:\"Add Menu Item\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:menuItems.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.label,\" - \",item.message]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateMenu,children:\"Create Menu\"})]})]});}export default Menu;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Menu","_ref","serverId","channels","selectedChannel","setSelectedChannel","messages","setMessages","selectedMessage","setSelectedMessage","menuType","setMenuType","menuItems","setMenuItems","menuItemLabel","setMenuItemLabel","menuItemMessage","setMenuItemMessage","error","setError","fetchMessages","channelId","response","fetch","concat","ok","Error","data","json","console","message","handleAddMenuItem","label","handleCreateMenu","log","JSON","stringify","method","headers","body","messageId","alert","className","children","onClick","document","getElementById","classList","toggle","id","value","onChange","e","target","map","channel","name","content","type","placeholder","item","index"],"sources":["/home/kira/panel/src/components/MenuForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction Menu({ serverId, channels, selectedChannel, setSelectedChannel }) {\n  const [messages, setMessages] = useState([]);\n  const [selectedMessage, setSelectedMessage] = useState('');\n  const [menuType, setMenuType] = useState('normal');\n  const [menuItems, setMenuItems] = useState([]);\n  const [menuItemLabel, setMenuItemLabel] = useState('');\n  const [menuItemMessage, setMenuItemMessage] = useState('');\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (selectedChannel) {\n      fetchMessages(selectedChannel);\n    }\n  }, [selectedChannel]);\n\n  const fetchMessages = async (channelId) => {\n    try {\n      const response = await fetch(`/api/server/${serverId}/channels/${channelId}/messages`);\n      if (!response.ok) throw new Error('Failed to fetch messages');\n      const data = await response.json();\n      setMessages(data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n      setError('Error fetching messages: ' + error.message);\n    }\n  };\n\n  const handleAddMenuItem = () => {\n    setMenuItems([...menuItems, { label: menuItemLabel, message: menuItemMessage }]);\n    setMenuItemLabel('');\n    setMenuItemMessage('');\n  };\n\n  const handleCreateMenu = async () => {\n    try {\n      console.log(`Creating menu in Channel: ${selectedChannel} with Message: ${selectedMessage}`);\n      console.log(`Menu Items: ${JSON.stringify(menuItems)}`);\n\n      const response = await fetch(`/api/server/${serverId}/message/menu`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          channelId: selectedChannel,\n          messageId: selectedMessage,\n          menuType,\n          menuItems,\n        }),\n      });\n      if (!response.ok) throw new Error('Failed to create menu');\n      alert('Menu created successfully');\n    } catch (error) {\n      console.error('Error creating menu:', error);\n      setError('Error creating menu: ' + error.message);\n    }\n  };\n\n  if (error) {\n    return <div className=\"page\"><p>{error}</p></div>;\n  }\n\n  return (\n    <div className=\"section\">\n      <h2 onClick={() => document.getElementById('menuSection').classList.toggle('hidden')}>Create Menu</h2>\n      <div id=\"menuSection\" className=\"hidden\">\n        <label>\n          Select Channel:\n          <select value={selectedChannel} onChange={(e) => setSelectedChannel(e.target.value)}>\n            {channels.map(channel => (\n              <option key={channel.id} value={channel.id}>{channel.name}</option>\n            ))}\n          </select>\n        </label>\n        <label>\n          Select Message:\n          <select value={selectedMessage} onChange={(e) => setSelectedMessage(e.target.value)}>\n            {messages.map(message => (\n              <option key={message.id} value={message.id}>{message.content}</option>\n            ))}\n          </select>\n        </label>\n        <label>\n          Menu Type:\n          <select value={menuType} onChange={(e) => setMenuType(e.target.value)}>\n            <option value=\"normal\">Normal</option>\n            <option value=\"dropdown\">Dropdown</option>\n          </select>\n        </label>\n        <div>\n          <input\n            type=\"text\"\n            value={menuItemLabel}\n            onChange={(e) => setMenuItemLabel(e.target.value)}\n            placeholder=\"Menu Item Label\"\n          />\n          <input\n            type=\"text\"\n            value={menuItemMessage}\n            onChange={(e) => setMenuItemMessage(e.target.value)}\n            placeholder=\"Menu Item Message\"\n          />\n          <button onClick={handleAddMenuItem}>Add Menu Item</button>\n        </div>\n        <ul>\n          {menuItems.map((item, index) => (\n            <li key={index}>{item.label} - {item.message}</li>\n          ))}\n        </ul>\n        <button onClick={handleCreateMenu}>Create Menu</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Menu;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}